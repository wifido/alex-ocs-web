/*! ocs-web 2016-08-11 */
define(["angular"],function(a){"use strict";a.module("appDirs",[]).directive("pwCheck",function(){return{require:"ngModel",link:function(a,b,c,d){var e="#"+c.pwCheck;$(b).add(e).on("keyup",function(){a.$apply(function(){var a=b.val()===$(e).val();d.$setValidity("pwmatch",a)})})}}}).directive("ocsProgress",["SystemConfig",function(a){return{restrict:"EA",scope:!1,replace:!0,templateUrl:"js/app/template/progress.html",link:function(a,b,c,d){c.percent&&(a.percent=c.percent)}}}]).directive("ocsDataTable",["SystemConfig","$compile","$http","authBiz",function(b,c,d,e){return{restrict:"EA",scope:{tableObj:"=tableObj"},replace:!0,link:function(b,e,f,g){var h={id:"",columns:[],clickRowCallback:function(){},expandRowCallback:function(){},accessControlCallback:"",templateUrl:""};b.$watch("tableObj",function(b,f,g){if(g.tableObj.id){var i=a.extend({},h,g.tableObj);d.get(i.templateUrl).success(function(a){var b=c(a)(g);e.append(b),"function"==typeof g.tableObj.accessControlCallback&&g.tableObj.accessControlCallback();var d=$("#"+i.id).bootstrapTable({columns:i.columns});d.on("click-row.bs.table",i.clickRowCallback),d.on("expand-row.bs.table",i.expandRowCallback)})}})}}}]).directive("ocsAccess",["$cookies","authBiz","SystemConfig",function(a,b,c){return{restrict:"EA",scope:!1,replace:!0,templateUrl:"js/app/template/access.html",link:function(d,e,f,g){d.normal=!1,d.nStore=!1,d.important=!1,d.iStore=!1,d.merChant=!1;var h=a.get("userRole"),i=c.userRole;if(b.userHasRole(h))switch(h){case i.business_important:d.important=!0,d.merChant=!0;break;case i.store_important:d.normal=!0,d.nStore=!0,d.important=!0,d.iStore=!0;break;case i.business_normal:break;case i.store_normal:d.normal=!0,d.nStore=!0}}}}])});